{"mappings":"A,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,A,W,iB,C,E,E,Q,C,E,Q,S,C,C,C,E,O,c,C,E,O,C,a,C,M,C,E,a,C,C,G,E,E,O,C,U,I,G,I,E,E,S,E,E,S,E,E,S,E,E,S,E,E,S,E,E,S,E,E,SCQA,IAAM,EAAU,AAAO,Q,E,E,E,S,EAAvB,KAAA,E,EAAA,KAAA,E,EAAA,KAAA,E,EAAA,YACI,EAAM,cAAc,GAEpB,IAAM,EAAO,EAAM,aAAgC,CAC7C,CAAA,KAAE,CAAI,CAAE,CAAG,AAAA,CAAA,EAAA,EAAA,UAAA,AAAA,EAAW,EAE5B,MAAM,AAAA,CAAA,EAAA,EAAA,UAAA,AAAA,EACD,UAAU,CAAC,GACX,KAAK,CAAC,CAAE,UAAW,MAAa,GAErC,EAAK,KAAK,EACd,E,G,C,G,C,E,O,C,E,S,C,C,C,E,S,E,C,E,G,C,E,E,I,C,G,C,M,E,C,E,E,C,C,S,E,C,E,G,C,E,E,K,C,G,C,M,E,C,E,E,C,C,S,E,C,M,C,C,E,I,C,E,E,K,E,A,C,C,E,E,K,Y,E,E,I,E,S,C,E,E,E,E,E,I,C,E,E,C,E,A,C,E,E,K,C,E,G,E,C,E,I,G,IAEA,IAAA,EAAe,IACX,AAAA,CAAA,EAAA,EAAA,IAAA,AAAA,EAAC,EAAA,SAAA,CAAS,CAAC,K,AAAM,G,AAAA,E,U,C,AAAA,E,O,CAAA,EAAI,SAAA,CACjB,AAAA,CAAA,EAAA,EAAA,GAAA,AAAA,EAAA,KAAA,CAAI,UAAU,OAAM,SAAA,YAAA,GAEpB,AAAA,CAAA,EAAA,EAAA,IAAA,AAAA,EAAA,OAAA,CACI,UAAU,uCACV,SAAU,EAAO,SAAA,CAEjB,AAAA,CAAA,EAAA,EAAA,GAAA,AAAA,EAAC,EAAA,aAAA,CAAa,CAAC,UAAU,YAAY,MAAM,MAAK,SAC5C,AAAA,CAAA,EAAA,EAAA,GAAA,AAAA,EAAC,EAAA,WAAA,CAAW,CACR,YAAY,MACZ,KAAK,MACL,KAAK,OACL,SAAQ,CAAA,CAAA,EACV,GAGN,AAAA,CAAA,EAAA,EAAA,GAAA,AAAA,EAAC,EAAA,MAAA,CAAM,CAAC,KAAK,SAAS,Q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","sources":["<anon>","src/page/Downloader.tsx","src/component/Downloader.tsx","node_modules/.pnpm/native-file-system-adapter@3.0.1/node_modules/native-file-system-adapter/src/util.js","node_modules/.pnpm/@parcel+runtime-js@2.13.3_@parcel+core@2.13.3_@swc+helpers@0.5.15_/node_modules/@parcel/runtime-js/lib/runtime-9e2e5875ea96df10.js","node_modules/.pnpm/@parcel+runtime-js@2.13.3_@parcel+core@2.13.3_@swc+helpers@0.5.15_/node_modules/@parcel/runtime-js/lib/runtime-9ae4414419585160.js","node_modules/.pnpm/@parcel+runtime-js@2.13.3_@parcel+core@2.13.3_@swc+helpers@0.5.15_/node_modules/@parcel/runtime-js/lib/runtime-bd61ba8e0bf97e5a.js","node_modules/.pnpm/@parcel+runtime-js@2.13.3_@parcel+core@2.13.3_@swc+helpers@0.5.15_/node_modules/@parcel/runtime-js/lib/runtime-dc3d9956227d72e1.js","node_modules/.pnpm/native-file-system-adapter@3.0.1/node_modules/native-file-system-adapter/src/config.js"],"sourcesContent":["\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true, configurable: true});\n}\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire94c2\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"ifW7K\", function(module, exports) {\n\n$parcel$defineInteropFlag(module.exports);\n\n$parcel$export(module.exports, \"default\", () => $d4a6b6e6d4199bd7$export$2e2bcd8739ae039);\n\nvar $5RZsW = parcelRequire(\"5RZsW\");\n\nvar $cl6Of = parcelRequire(\"cl6Of\");\n\nvar $iRwTZ = parcelRequire(\"iRwTZ\");\n\nvar $lt1PQ = parcelRequire(\"lt1PQ\");\n\nvar $afGE5 = parcelRequire(\"afGE5\");\n\nvar $DHxdW = parcelRequire(\"DHxdW\");\n\nvar $vkHkA = parcelRequire(\"vkHkA\");\nvar $d4a6b6e6d4199bd7$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst $d4a6b6e6d4199bd7$var$addTask = (event)=>$d4a6b6e6d4199bd7$var$__awaiter(void 0, void 0, void 0, function*() {\n        event.preventDefault();\n        const form = event.currentTarget;\n        const { path: path } = (0, $iRwTZ.formToJSON)(form);\n        yield (0, $DHxdW.downloader).createTask(path).start({\n            chunkSize: Math.pow(1024, 2) / 2\n        });\n        form.reset();\n    });\nvar $d4a6b6e6d4199bd7$export$2e2bcd8739ae039 = ()=>(0, $5RZsW.jsxs)((0, $afGE5.PageFrame), {\n        menu: (0, (/*@__PURE__*/$parcel$interopDefault($vkHkA))),\n        children: [\n            (0, $5RZsW.jsx)(\"h1\", {\n                className: \"my-4\",\n                children: \"Downloader\"\n            }),\n            (0, $5RZsW.jsxs)(\"form\", {\n                className: \"d-flex align-items-center gap-3 mb-3\",\n                onSubmit: $d4a6b6e6d4199bd7$var$addTask,\n                children: [\n                    (0, $5RZsW.jsx)((0, $cl6Of.FloatingLabel), {\n                        className: \"flex-fill\",\n                        label: \"URL\",\n                        children: (0, $5RZsW.jsx)((0, $cl6Of.FormControl), {\n                            placeholder: \"URL\",\n                            type: \"url\",\n                            name: \"path\",\n                            required: true\n                        })\n                    }),\n                    (0, $5RZsW.jsx)((0, $cl6Of.Button), {\n                        type: \"submit\",\n                        variant: \"primary\",\n                        children: \"+\"\n                    })\n                ]\n            }),\n            (0, $5RZsW.jsx)((0, $lt1PQ.Downloader), {})\n        ]\n    });\n\n});\nparcelRegister(\"lt1PQ\", function(module, exports) {\n\n$parcel$export(module.exports, \"Downloader\", () => $fa0dbad6580425e1$export$ef06e7620d37c296);\n\nvar $5RZsW = parcelRequire(\"5RZsW\");\n\nvar $ekpV1 = parcelRequire(\"ekpV1\");\n\nvar $cl6Of = parcelRequire(\"cl6Of\");\n\nvar $DHxdW = parcelRequire(\"DHxdW\");\nconst $fa0dbad6580425e1$export$ea3d6d720b5c931d = (0, $ekpV1.observer)(({ task: task })=>(0, $5RZsW.jsxs)((0, $cl6Of.Card), {\n        children: [\n            (0, $5RZsW.jsxs)((0, $cl6Of.CardBody), {\n                children: [\n                    (0, $5RZsW.jsx)((0, $cl6Of.CardTitle), {\n                        children: task.name\n                    }),\n                    (0, $5RZsW.jsx)((0, $cl6Of.ProgressBar), {\n                        striped: task.percent < 100,\n                        animated: task.executing,\n                        now: task.percent,\n                        label: true\n                    })\n                ]\n            }),\n            (0, $5RZsW.jsxs)((0, $cl6Of.CardFooter), {\n                className: \"d-flex justify-content-between align-items-center\",\n                children: [\n                    (0, $5RZsW.jsxs)(\"small\", {\n                        children: [\n                            task.loadedSize.toShortString(),\n                            \" /\",\n                            ' ',\n                            task.totalSize.toShortString()\n                        ]\n                    }),\n                    (0, $5RZsW.jsxs)(\"div\", {\n                        className: \"d-flex gap-3\",\n                        children: [\n                            task.percent < 100 && (task.executing ? (0, $5RZsW.jsx)((0, $cl6Of.Button), {\n                                size: \"sm\",\n                                variant: \"warning\",\n                                onClick: ()=>task.pause(),\n                                children: (0, $5RZsW.jsx)((0, $cl6Of.Icon), {\n                                    name: \"pause\"\n                                })\n                            }) : (0, $5RZsW.jsx)((0, $cl6Of.Button), {\n                                size: \"sm\",\n                                variant: \"success\",\n                                onClick: ()=>task.start(),\n                                children: (0, $5RZsW.jsx)((0, $cl6Of.Icon), {\n                                    name: \"play\"\n                                })\n                            })),\n                            (0, $5RZsW.jsx)((0, $cl6Of.Button), {\n                                size: \"sm\",\n                                variant: \"danger\",\n                                disabled: task.executing,\n                                onClick: ()=>(0, $DHxdW.downloader).destroyTask(task.name),\n                                children: (0, $5RZsW.jsx)((0, $cl6Of.Icon), {\n                                    name: \"trash\"\n                                })\n                            })\n                        ]\n                    })\n                ]\n            })\n        ]\n    }));\nconst $fa0dbad6580425e1$export$ef06e7620d37c296 = (0, $ekpV1.observer)(()=>(0, $5RZsW.jsx)(\"ol\", {\n        className: \"list-unstyled d-flex flex-column gap-3\",\n        children: (0, $DHxdW.downloader).tasks.map((task)=>(0, $5RZsW.jsx)(\"li\", {\n                children: (0, $5RZsW.jsx)($fa0dbad6580425e1$export$ea3d6d720b5c931d, {\n                    task: task\n                })\n            }, task.id))\n    }));\n\n});\n\n\nparcelRegister(\"jG9Jm\", function(module, exports) {\n\n$parcel$export(module.exports, \"errors\", () => $e5397ce30315ba90$export$30f3b02011db23c0);\n$parcel$export(module.exports, \"config\", () => $e5397ce30315ba90$export$e506a1d27d1eaa20);\n$parcel$export(module.exports, \"fromDataTransfer\", () => $e5397ce30315ba90$export$34af8373a76882c2);\n$parcel$export(module.exports, \"getDirHandlesFromInput\", () => $e5397ce30315ba90$export$7d17e35d81e093f2);\n$parcel$export(module.exports, \"getFileHandlesFromInput\", () => $e5397ce30315ba90$export$45ac616e835cfe89);\nconst $e5397ce30315ba90$export$30f3b02011db23c0 = {\n    INVALID: [\n        'seeking position failed.',\n        'InvalidStateError'\n    ],\n    GONE: [\n        'A requested file or directory could not be found at the time an operation was processed.',\n        'NotFoundError'\n    ],\n    MISMATCH: [\n        'The path supplied exists, but was not an entry of requested type.',\n        'TypeMismatchError'\n    ],\n    MOD_ERR: [\n        'The object can not be modified in this way.',\n        'InvalidModificationError'\n    ],\n    SYNTAX: (m)=>[\n            `Failed to execute 'write' on 'UnderlyingSinkBase': Invalid params passed. ${m}`,\n            'SyntaxError'\n        ],\n    SECURITY: [\n        'It was determined that certain files are unsafe for access within a Web application, or that too many calls are being made on file resources.',\n        'SecurityError'\n    ],\n    DISALLOWED: [\n        'The request is not allowed by the user agent or the platform in the current context.',\n        'NotAllowedError'\n    ]\n};\nconst $e5397ce30315ba90$export$e506a1d27d1eaa20 = {\n    writable: globalThis.WritableStream\n};\n\n\n\nasync function $e5397ce30315ba90$export$34af8373a76882c2(entries) {\n    console.warn('deprecated fromDataTransfer - use `dt.items[0].getAsFileSystemHandle()` instead');\n    const [memory, sandbox, fs] = await Promise.all([\n        (parcelRequire(\"3Mufc\")),\n        (parcelRequire(\"dwrTj\")),\n        (parcelRequire(\"cvhlB\"))\n    ]);\n    const folder = new memory.FolderHandle('', false);\n    folder._entries = entries.map((entry)=>entry.isFile ? new sandbox.FileHandle(entry, false) : new sandbox.FolderHandle(entry, false));\n    return new fs.FileSystemDirectoryHandle(folder);\n}\n\n\nasync function $e5397ce30315ba90$export$7d17e35d81e093f2(input) {\n    const { FolderHandle: FolderHandle, FileHandle: FileHandle } = await (parcelRequire(\"3Mufc\"));\n    const { FileSystemDirectoryHandle: FileSystemDirectoryHandle } = await (parcelRequire(\"cvhlB\"));\n    const files = Array.from(input.files);\n    const rootName = files[0].webkitRelativePath.split('/', 1)[0];\n    const root = new FolderHandle(rootName, false);\n    files.forEach((file)=>{\n        const path = file.webkitRelativePath.split('/');\n        path.shift();\n        const name = path.pop();\n        const dir = path.reduce((dir, path)=>{\n            if (!dir._entries[path]) dir._entries[path] = new FolderHandle(path, false);\n            return dir._entries[path];\n        }, root);\n        dir._entries[name] = new FileHandle(file.name, file, false);\n    });\n    return new FileSystemDirectoryHandle(root);\n}\n\n\nasync function $e5397ce30315ba90$export$45ac616e835cfe89(input) {\n    const { FileHandle: FileHandle } = await (parcelRequire(\"3Mufc\"));\n    const { FileSystemFileHandle: FileSystemFileHandle } = await (parcelRequire(\"iWdfd\"));\n    return Array.from(input.files).map((file)=>new FileSystemFileHandle(new FileHandle(file.name, file, false)));\n}\n\n});\nparcelRegister(\"3Mufc\", function(module, exports) {\n\nvar $if9Ie = parcelRequire(\"if9Ie\");\nmodule.exports = $if9Ie(\"9AOUm\").then(()=>parcelRequire('40oxC'));\n\n});\n\nparcelRegister(\"dwrTj\", function(module, exports) {\n\nvar $if9Ie = parcelRequire(\"if9Ie\");\nmodule.exports = $if9Ie(\"acNkV\").then(()=>parcelRequire('k5tLT'));\n\n});\n\nparcelRegister(\"cvhlB\", function(module, exports) {\n\nvar $if9Ie = parcelRequire(\"if9Ie\");\nmodule.exports = $if9Ie(\"gLIJH\").then(()=>parcelRequire('2Fv9o'));\n\n});\n\nparcelRegister(\"iWdfd\", function(module, exports) {\n\nvar $if9Ie = parcelRequire(\"if9Ie\");\nmodule.exports = $if9Ie(\"6hwdd\").then(()=>parcelRequire('ggMY5'));\n\n});\n\n\nparcelRegister(\"f9c8S\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $b0711d7049896793$export$2e2bcd8739ae039);\nconst $b0711d7049896793$var$config = {\n    ReadableStream: globalThis.ReadableStream,\n    WritableStream: globalThis.WritableStream,\n    TransformStream: globalThis.TransformStream,\n    DOMException: globalThis.DOMException,\n    Blob: globalThis.Blob,\n    File: globalThis.File\n};\nvar $b0711d7049896793$export$2e2bcd8739ae039 = $b0711d7049896793$var$config;\n\n});\n\n\n//# sourceMappingURL=Downloader.e6ac994d.js.map\n","import { Button, FloatingLabel, FormControl } from 'boot-cell';\nimport { formToJSON } from 'web-utility';\n\nimport { Downloader } from '../component/Downloader';\nimport { PageFrame } from '../component/PageFrame';\nimport { downloader } from '../model';\nimport menu from './menu.json';\n\nconst addTask = async (event: SubmitEvent) => {\n    event.preventDefault();\n\n    const form = event.currentTarget as HTMLFormElement;\n    const { path } = formToJSON(form);\n\n    await downloader\n        .createTask(path as string)\n        .start({ chunkSize: 1024 ** 2 / 2 });\n\n    form.reset();\n};\n\nexport default () => (\n    <PageFrame menu={menu}>\n        <h1 className=\"my-4\">Downloader</h1>\n\n        <form\n            className=\"d-flex align-items-center gap-3 mb-3\"\n            onSubmit={addTask}\n        >\n            <FloatingLabel className=\"flex-fill\" label=\"URL\">\n                <FormControl\n                    placeholder=\"URL\"\n                    type=\"url\"\n                    name=\"path\"\n                    required\n                />\n            </FloatingLabel>\n\n            <Button type=\"submit\" variant=\"primary\">\n                +\n            </Button>\n        </form>\n\n        <Downloader />\n    </PageFrame>\n);\n","import { FC, observer } from 'web-cell';\nimport {\n    Button,\n    Card,\n    CardBody,\n    CardFooter,\n    CardTitle,\n    Icon,\n    ProgressBar\n} from 'boot-cell';\nimport { DownloadTask } from 'mobx-downloader';\n\nimport { downloader } from '../model';\n\nexport const DTCard: FC<{ task: DownloadTask }> = observer(({ task }) => (\n    <Card>\n        <CardBody>\n            <CardTitle>{task.name}</CardTitle>\n            <ProgressBar\n                striped={task.percent < 100}\n                animated={task.executing}\n                now={task.percent}\n                label\n            />\n        </CardBody>\n        <CardFooter className=\"d-flex justify-content-between align-items-center\">\n            <small>\n                {task.loadedSize.toShortString()} /{' '}\n                {task.totalSize.toShortString()}\n            </small>\n            <div className=\"d-flex gap-3\">\n                {task.percent < 100 &&\n                    (task.executing ? (\n                        <Button\n                            size=\"sm\"\n                            variant=\"warning\"\n                            onClick={() => task.pause()}\n                        >\n                            <Icon name=\"pause\" />\n                        </Button>\n                    ) : (\n                        <Button\n                            size=\"sm\"\n                            variant=\"success\"\n                            onClick={() => task.start()}\n                        >\n                            <Icon name=\"play\" />\n                        </Button>\n                    ))}\n                <Button\n                    size=\"sm\"\n                    variant=\"danger\"\n                    disabled={task.executing}\n                    onClick={() => downloader.destroyTask(task.name)}\n                >\n                    <Icon name=\"trash\" />\n                </Button>\n            </div>\n        </CardFooter>\n    </Card>\n));\n\nexport const Downloader: FC = observer(() => (\n    <ol className=\"list-unstyled d-flex flex-column gap-3\">\n        {downloader.tasks.map(task => (\n            <li key={task.id}>\n                <DTCard task={task} />\n            </li>\n        ))}\n    </ol>\n));\n","export const errors = {\n  INVALID: ['seeking position failed.', 'InvalidStateError'],\n  GONE: ['A requested file or directory could not be found at the time an operation was processed.', 'NotFoundError'],\n  MISMATCH: ['The path supplied exists, but was not an entry of requested type.', 'TypeMismatchError'],\n  MOD_ERR: ['The object can not be modified in this way.', 'InvalidModificationError'],\n  SYNTAX: m => [`Failed to execute 'write' on 'UnderlyingSinkBase': Invalid params passed. ${m}`, 'SyntaxError'],\n  SECURITY: ['It was determined that certain files are unsafe for access within a Web application, or that too many calls are being made on file resources.', 'SecurityError'],\n  DISALLOWED: ['The request is not allowed by the user agent or the platform in the current context.', 'NotAllowedError']\n}\n\nexport const config = {\n  writable: globalThis.WritableStream\n}\n\nexport async function fromDataTransfer (entries) {\n  console.warn('deprecated fromDataTransfer - use `dt.items[0].getAsFileSystemHandle()` instead')\n  const [memory, sandbox, fs] = await Promise.all([\n    import('./adapters/memory.js'),\n    import('./adapters/sandbox.js'),\n    import('./FileSystemDirectoryHandle.js')\n  ])\n\n  const folder = new memory.FolderHandle('', false)\n  folder._entries = entries.map(entry => entry.isFile\n    ? new sandbox.FileHandle(entry, false)\n    : new sandbox.FolderHandle(entry, false)\n  )\n\n  return new fs.FileSystemDirectoryHandle(folder)\n}\n\nexport async function getDirHandlesFromInput (input) {\n  const { FolderHandle, FileHandle } = await import('./adapters/memory.js')\n  const { FileSystemDirectoryHandle } = await import('./FileSystemDirectoryHandle.js')\n\n  const files = Array.from(input.files)\n  const rootName = files[0].webkitRelativePath.split('/', 1)[0]\n  const root = new FolderHandle(rootName, false)\n\n  files.forEach(file => {\n    const path = file.webkitRelativePath.split('/')\n    path.shift()\n    const name = path.pop()\n\n    const dir = path.reduce((dir, path) => {\n      if (!dir._entries[path]) dir._entries[path] = new FolderHandle(path, false)\n      return dir._entries[path]\n    }, root)\n\n    dir._entries[name] = new FileHandle(file.name, file, false)\n  })\n\n  return new FileSystemDirectoryHandle(root)\n}\n\nexport async function getFileHandlesFromInput (input) {\n  const { FileHandle } = await import('./adapters/memory.js')\n  const { FileSystemFileHandle } = await import('./FileSystemFileHandle.js')\n\n  return Array.from(input.files).map(file =>\n    new FileSystemFileHandle(new FileHandle(file.name, file, false))\n  )\n}\n","let load = require('./helpers/browser/esm-js-loader');\nmodule.exports = (load(\"9AOUm\")).then(() => parcelRequire('40oxC'));","let load = require('./helpers/browser/esm-js-loader');\nmodule.exports = (load(\"acNkV\")).then(() => parcelRequire('k5tLT'));","let load = require('./helpers/browser/esm-js-loader');\nmodule.exports = (load(\"gLIJH\")).then(() => parcelRequire('2Fv9o'));","let load = require('./helpers/browser/esm-js-loader');\nmodule.exports = (load(\"6hwdd\")).then(() => parcelRequire('ggMY5'));","const config = {\n  ReadableStream: globalThis.ReadableStream,\n  WritableStream: globalThis.WritableStream,\n  TransformStream: globalThis.TransformStream,\n  DOMException: globalThis.DOMException,\n  Blob: globalThis.Blob,\n  File: globalThis.File,\n}\n\nexport default config\n"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","value","$d4a6b6e6d4199bd7$export$2e2bcd8739ae039","$5RZsW","$cl6Of","$iRwTZ","$lt1PQ","$afGE5","$DHxdW","$vkHkA","$d4a6b6e6d4199bd7$var$addTask","event","thisArg","_arguments","P","generator","preventDefault","form","currentTarget","path","formToJSON","downloader","createTask","start","chunkSize","Math","reset","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","adopt","then","apply","jsxs","PageFrame","menu","a","__esModule","default","children","jsx","className","onSubmit","FloatingLabel","label","FormControl","placeholder","type","name","required","Button","variant","Downloader","$fa0dbad6580425e1$export$ef06e7620d37c296","$ekpV1","$fa0dbad6580425e1$export$ea3d6d720b5c931d","observer","task","Card","CardBody","CardTitle","ProgressBar","striped","percent","animated","executing","now","CardFooter","loadedSize","toShortString","totalSize","size","onClick","pause","Icon","disabled","destroyTask","tasks","map","id","$e5397ce30315ba90$export$30f3b02011db23c0","$e5397ce30315ba90$export$e506a1d27d1eaa20","$e5397ce30315ba90$export$34af8373a76882c2","$e5397ce30315ba90$export$7d17e35d81e093f2","$e5397ce30315ba90$export$45ac616e835cfe89","INVALID","GONE","MISMATCH","MOD_ERR","SYNTAX","m","SECURITY","DISALLOWED","writable","WritableStream","entries","console","warn","memory","sandbox","fs","all","folder","FolderHandle","_entries","entry","isFile","FileHandle","FileSystemDirectoryHandle","input","files","Array","from","root","webkitRelativePath","split","forEach","file","shift","pop","dir","reduce","FileSystemFileHandle","$if9Ie","$b0711d7049896793$export$2e2bcd8739ae039","ReadableStream","TransformStream","DOMException","Blob","File"],"version":3,"file":"Downloader.e6ac994d.js.map"}