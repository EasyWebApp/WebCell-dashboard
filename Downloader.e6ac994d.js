function e(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire94c2,r=t.register;r("ifW7K",function(r,a){Object.defineProperty(r.exports,"__esModule",{value:!0,configurable:!0}),e(r.exports,"default",()=>f);var n=t("5RZsW"),i=t("cl6Of"),l=t("iRwTZ"),o=t("lt1PQ"),s=t("afGE5"),d=t("DHxdW"),c=t("vkHkA");let u=e=>{var t,r,a,n;return t=void 0,r=void 0,a=void 0,n=function*(){e.preventDefault();let t=e.currentTarget,{path:r}=(0,l.formToJSON)(t);yield(0,d.downloader).createTask(r).start({chunkSize:524288}),t.reset()},new(a||(a=Promise))(function(e,i){function l(e){try{s(n.next(e))}catch(e){i(e)}}function o(e){try{s(n.throw(e))}catch(e){i(e)}}function s(t){var r;t.done?e(t.value):((r=t.value)instanceof a?r:new a(function(e){e(r)})).then(l,o)}s((n=n.apply(t,r||[])).next())})};var f=()=>(0,n.jsxs)(s.PageFrame,{menu:c&&c.__esModule?c.default:c,children:[(0,n.jsx)("h1",{className:"my-4",children:"Downloader"}),(0,n.jsxs)("form",{className:"d-flex align-items-center gap-3 mb-3",onSubmit:u,children:[(0,n.jsx)(i.FloatingLabel,{className:"flex-fill",label:"URL",children:(0,n.jsx)(i.FormControl,{placeholder:"URL",type:"url",name:"path",required:!0})}),(0,n.jsx)(i.Button,{type:"submit",variant:"primary",children:"+"})]}),(0,n.jsx)(o.Downloader,{})]})}),r("lt1PQ",function(r,a){e(r.exports,"Downloader",()=>d);var n=t("5RZsW"),i=t("ekpV1"),l=t("cl6Of"),o=t("DHxdW");let s=(0,i.observer)(({task:e})=>(0,n.jsxs)(l.Card,{children:[(0,n.jsxs)(l.CardBody,{children:[(0,n.jsx)(l.CardTitle,{children:e.name}),(0,n.jsx)(l.ProgressBar,{striped:e.percent<100,animated:e.executing,now:e.percent,label:!0})]}),(0,n.jsxs)(l.CardFooter,{className:"d-flex justify-content-between align-items-center",children:[(0,n.jsxs)("small",{children:[e.loadedSize.toShortString()," /"," ",e.totalSize.toShortString()]}),(0,n.jsxs)("div",{className:"d-flex gap-3",children:[e.percent<100&&(e.executing?(0,n.jsx)(l.Button,{size:"sm",variant:"warning",onClick:()=>e.pause(),children:(0,n.jsx)(l.Icon,{name:"pause"})}):(0,n.jsx)(l.Button,{size:"sm",variant:"success",onClick:()=>e.start(),children:(0,n.jsx)(l.Icon,{name:"play"})})),(0,n.jsx)(l.Button,{size:"sm",variant:"danger",disabled:e.executing,onClick:()=>(0,o.downloader).destroyTask(e.name),children:(0,n.jsx)(l.Icon,{name:"trash"})})]})]})]})),d=(0,i.observer)(()=>(0,n.jsx)("ol",{className:"list-unstyled d-flex flex-column gap-3",children:(0,o.downloader).tasks.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)(s,{task:e})},e.id))}))}),r("jG9Jm",function(r,a){e(r.exports,"errors",()=>n),e(r.exports,"config",()=>i),e(r.exports,"fromDataTransfer",()=>l),e(r.exports,"getDirHandlesFromInput",()=>o),e(r.exports,"getFileHandlesFromInput",()=>s);let n={INVALID:["seeking position failed.","InvalidStateError"],GONE:["A requested file or directory could not be found at the time an operation was processed.","NotFoundError"],MISMATCH:["The path supplied exists, but was not an entry of requested type.","TypeMismatchError"],MOD_ERR:["The object can not be modified in this way.","InvalidModificationError"],SYNTAX:e=>[`Failed to execute 'write' on 'UnderlyingSinkBase': Invalid params passed. ${e}`,"SyntaxError"],SECURITY:["It was determined that certain files are unsafe for access within a Web application, or that too many calls are being made on file resources.","SecurityError"],DISALLOWED:["The request is not allowed by the user agent or the platform in the current context.","NotAllowedError"]},i={writable:globalThis.WritableStream};async function l(e){console.warn("deprecated fromDataTransfer - use `dt.items[0].getAsFileSystemHandle()` instead");let[r,a,n]=await Promise.all([t("3Mufc"),t("dwrTj"),t("cvhlB")]),i=new r.FolderHandle("",!1);return i._entries=e.map(e=>e.isFile?new a.FileHandle(e,!1):new a.FolderHandle(e,!1)),new n.FileSystemDirectoryHandle(i)}async function o(e){let{FolderHandle:r,FileHandle:a}=await t("3Mufc"),{FileSystemDirectoryHandle:n}=await t("cvhlB"),i=Array.from(e.files),l=new r(i[0].webkitRelativePath.split("/",1)[0],!1);return i.forEach(e=>{let t=e.webkitRelativePath.split("/");t.shift();let n=t.pop();t.reduce((e,t)=>(e._entries[t]||(e._entries[t]=new r(t,!1)),e._entries[t]),l)._entries[n]=new a(e.name,e,!1)}),new n(l)}async function s(e){let{FileHandle:r}=await t("3Mufc"),{FileSystemFileHandle:a}=await t("iWdfd");return Array.from(e.files).map(e=>new a(new r(e.name,e,!1)))}}),r("3Mufc",function(e,r){var a=t("if9Ie");e.exports=a("9AOUm").then(()=>t("40oxC"))}),r("dwrTj",function(e,r){var a=t("if9Ie");e.exports=a("acNkV").then(()=>t("k5tLT"))}),r("cvhlB",function(e,r){var a=t("if9Ie");e.exports=a("gLIJH").then(()=>t("2Fv9o"))}),r("iWdfd",function(e,r){var a=t("if9Ie");e.exports=a("6hwdd").then(()=>t("ggMY5"))}),r("f9c8S",function(t,r){e(t.exports,"default",()=>a);var a={ReadableStream:globalThis.ReadableStream,WritableStream:globalThis.WritableStream,TransformStream:globalThis.TransformStream,DOMException:globalThis.DOMException,Blob:globalThis.Blob,File:globalThis.File}});
//# sourceMappingURL=Downloader.e6ac994d.js.map
